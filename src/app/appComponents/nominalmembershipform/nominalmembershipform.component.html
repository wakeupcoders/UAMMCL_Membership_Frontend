

<app-loader *ngIf="isLoading"></app-loader>

<div class="row" *ngIf="!isLoading && nominalMembers.length<=0 && isTableView">
  <div class="col-md-4"></div>
  <div class="col-md-4">
    <div class="card text-center">
      <img src="https://assets-v2.lottiefiles.com/a/0e30b444-117c-11ee-9b0d-0fd3804d46cd/BkQxD7wtnZ.gif"
        class="card-img-top mx-auto d-block" alt="No Records">
      <div class="card-body">
        <h3 class="card-title mb-3">No Records Found</h3>
        <p class="card-text mb-4">It looks like there are no records available. You can add new records or contact
          support for assistance.</p>
        <div class="d-flex justify-content-center gap-3">
          <button class="btn btn-dark btn-lg" (click)="showForm(false)">Add Records</button>
          <a href="https://wakeupcoders.com" target="_blank" class="btn btn-secondary btn-lg">Contact Support</a>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-4"></div>
</div>







<div class="container">
  <div class="container" *ngIf="!isLoading">
    <span *ngIf="!isTableView">
    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="container mt-4">
      <div class="card shadow-lg">
        <div class="card-header bg-dark text-white">
          <h4>Registration Form</h4>
        </div>
        <div class="card-body">
          
          <!-- Registration Information -->
          <fieldset formGroupName="registrationInformation" class="shadow-lg p-3 mb-5 bg-white rounded">  <!-- ðŸ‘ˆ Add this wrapper -->
            <legend class="h5">Registration Information</legend>
            <div class="row">
              <div class="col-md-6">
                <label class="form-label">Name of Applicant:</label>
                <input type="text" formControlName="nameOfApplicant" class="form-control">
              </div>
              <div class="col-md-6">
                <label class="form-label">Date of Incorporation:</label>
                <input type="date" formControlName="dateOfIncorporation" class="form-control">
              </div>
            </div>
            <br>
              <!-- Registered Address -->
          <fieldset formGroupName="registeredAddress" class="mb-3">
            <legend class="h5">Registered Address</legend>
            <div class="row">
              <div class="col-md-4">
                <label class="form-label">State:</label>
                <input type="text" formControlName="state" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">City:</label>
                <input type="text" formControlName="city" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">District:</label>
                <input type="text" formControlName="district" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">Tehsil:</label>
                <input type="text" formControlName="tehsil" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">Pin Code:</label>
                <input type="text" formControlName="pinCode" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">Zone:</label>
                <input type="text" formControlName="zone" class="form-control">
              </div>
            </div>
          </fieldset>
          </fieldset> <!-- ðŸ‘ˆ Close the wrapper -->
    
        
    
          <!-- ID Information -->
          <fieldset formGroupName="idInformation" class="mb-3" class="shadow-lg p-3 mb-5 bg-white rounded">
            <legend class="h5">ID Information</legend>
            <div class="row">
              <div class="col-md-4">
                <label class="form-label">PAN:</label>
                <input type="text" formControlName="pan" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">ITAN:</label>
                <input type="text" formControlName="itan" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">GST Number:</label>
                <input type="text" formControlName="gstNumber" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">Aadhar:</label>
                <input type="text" formControlName="aadhar" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">ID Number:</label>
                <input type="text" formControlName="idNumber" class="form-control">
              </div>
            </div>
          </fieldset>
    
          <!-- Contact Information -->
          <fieldset formGroupName="contactInformation" class="mb-3" class="shadow-lg p-3 mb-5 bg-white rounded">
            <legend class="h5">Contact Information</legend>
            <div class="row">
              <div class="col-md-4">
                <label class="form-label">Mobile No:</label>
                <input type="text" formControlName="mobileNo" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">Email ID:</label>
                <input type="email" formControlName="emailId" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">Nominee Name:</label>
                <input type="text" formControlName="nomineeName" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">License No:</label>
                <input type="text" formControlName="licenseNo" class="form-control">
              </div>
              <div class="col-md-4 form-check mt-4">
                <input type="checkbox" formControlName="registeredWithOtherExchange" class="form-check-input">
                <label class="form-check-label">Registered with Other Exchange</label>
              </div>
            </div>
          </fieldset>
    
          <!-- GST Information -->
          <fieldset formGroupName="gstInformation" class="mb-3" class="shadow-lg p-3 mb-5 bg-white rounded">
            <legend class="h5">GST Information</legend>
            <div class="row">
              <div class="col-md-4 form-check">
                <input type="checkbox" formControlName="gstAvailable" class="form-check-input">
                <label class="form-check-label">GST Available</label>
              </div>
              <div class="col-md-4">
                <label class="form-label">GST Registration No:</label>
                <input type="text" formControlName="gstRegistrationNo" class="form-control">
              </div>
              <div class="col-md-4">
                <label class="form-label">GST State Code:</label>
                <input type="text" formControlName="gstStateCode" class="form-control">
              </div>
            </div>
    
            <fieldset formGroupName="gstAddress" class="mt-3">
              <legend class="h6">GST Address</legend>
              <div class="row">
                <div class="col-md-4">
                  <label class="form-label">State:</label>
                  <input type="text" formControlName="state" class="form-control">
                </div>
                <div class="col-md-4">
                  <label class="form-label">City:</label>
                  <input type="text" formControlName="city" class="form-control">
                </div>
                <div class="col-md-4">
                  <label class="form-label">District:</label>
                  <input type="text" formControlName="district" class="form-control">
                </div>
                <div class="col-md-4">
                  <label class="form-label">Tehsil:</label>
                  <input type="text" formControlName="tehsil" class="form-control">
                </div>
                <div class="col-md-4">
                  <label class="form-label">Pin Code:</label>
                  <input type="text" formControlName="pinCode" class="form-control">
                </div>
              </div>
            </fieldset>
          </fieldset>

          <div class="shadow-lg p-3 mb-5 bg-white rounded p-3 mb-3 mb-3" *ngIf="editMode==true">
            <label>Attachments</label>
            <div class="file-upload">
              <input type="file" (change)="onFileSelected($event)" />
              <a (click)="uploadFile()" class="btn btn-dark">Upload</a>
              <p class="text-success">{{uploadMessage}}</p>
            </div>
    
            <hr>
            <div class="file-card" *ngFor="let attachment of selectedMember.attachments">
              <div class="file-info">
                <p>{{attachment}}</p>
              </div>
              <div class="file-actions">
                <a class="btn btn-dark" (click)="onView(attachment)">View</a>
                <a class="btn btn-danger" (click)="onDeleteAttachment(attachment)">Delete</a>
              </div>
            </div>
    
    
          </div>
    
          <!-- Buttons -->
          <div class="text-center">
            <button type="submit" class="btn btn-dark me-2">Submit</button>
            <button type="button" class="btn btn-danger" (click)="showForm(true)">Cancel</button>
          </div>
    
        </div>
      </div>
    </form>
    
    </span>

    <div class="container mt-4" *ngIf="isTableView && nominalMembers.length>0">
      <h2>Nominal Membership Data</h2>
  
  
      <div class="btn-group" role="group" aria-label="Basic example">
  
        <button class="btn btn-success" (click)="showForm(false)">New</button>
  
        <!-- Input field with a template reference variable -->
        <input #inputValue type="text" class="form-control" placeholder="Enter Member Id" />
        <!-- Button triggers the redirect method -->
        <!-- <button class="btn btn-primary" (click)="redirectToReport(inputValue.value)">
          Export
        </button> -->
  
  
      </div>
  
      <!-- <a class="btn btn-primary" href="https://uammcl-membership-backend.onrender.com/api/reports/downloadOM"
          target="_blank">Export</a> -->
  
  
  
      <br><br>
  
  
  
      <div class="table-responsive">
        <table class="table table-bordered table-striped">
          <thead class="thead-dark">
            <tr>
              <th>Name</th>
              <th>Incorporation Date</th>
              <th>State</th>
              <th>City</th>
              <th>Distt.</th>
              <th>Date</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let member of nominalMembers | paginate: { itemsPerPage: 10, currentPage: p }">
              <td>{{member["registrationInformation"].nameOfApplicant}}</td>
              <td>{{member["registrationInformation"].dateOfIncorporation | date: 'dd, MMMM yyyy'}}</td>
              <td>{{member["registrationInformation"]["registeredAddress"].state}}</td>
              <td>{{member["registrationInformation"]["registeredAddress"].city}}</td>
              <td>{{member["registrationInformation"]["registeredAddress"].district}}</td>
              <td>{{member.createdAt | date: 'dd, MMMM yyyy'}}</td>
              <td>
                <button class="btn btn-primary btn-sm" (click)="onEditMember(member)"><svg
                  xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-gear-fill" viewBox="0 0 16 16">
                  <path
                    d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z" />
                </svg></button>
                <button class="btn btn-danger btn-sm" (click)="deletePopup(member._id)"><svg
                  xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-trash-fill" viewBox="0 0 16 16">
                  <path
                    d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0" />
                </svg></button>
              </td>
           
            
            </tr>
            <!-- Add more rows as needed -->
          </tbody>
        </table>
  
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
      </div>
    </div>
  </div>
</div>
  